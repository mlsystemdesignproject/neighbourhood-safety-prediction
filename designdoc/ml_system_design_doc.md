# ML System Design Doc - Neighbourhood Safety Prediction [RU]
## Дизайн ML системы – Прогнозирование уровня безопасности в районах Лондона

### 1. Цели и предпосылки
#### 1.1. Обоснованность разработки продукта

##### Бизнес цель
Бизнес цель – разработка ML модели, которая будет точно прогнозировать уровень безопасности в районах Лондона на следующие 6 месяцев. Прогнозы будут использоваться для:
- принятия решений по управлению безопасностью в районах
- информированности жителей об уровне безопасности в определенном районе 

##### Побочная бизнес цель
Побочная бизнес цель – повышение уровня безопасности в районах Лондона за счет более эффективного распределения ресурсов и информирования жителей.

##### Описание текущего бизнес-процесса
В настоящее время исторический уровень безопасности в районах Лондона можно оценить из данных различных источников, включая:
- отчеты полиции
- данные о преступности

##### Польза от внедрения ML модели
Внедрение ML модели позволит прогнозировать уровень безопасности в районах Лондона. Это будет способствовать повышению эффективности управления безопасностью и повышению уровня безопасности в целом.

##### Критерии успеха ML модели:
- Точность прогнозов должна быть ….. *(DS)*
- Прогнозы должны быть полезны для принятия решений по управлению безопасностью.

#### 1.2. Бизнес требования и ограничения
##### Целевое видение
- Необходимо делать предсказания уровня безопасности на 6 *(??? team meeting @Sun)* следующих месяцев. Прогнозы получать раз в месяц до последнего числа месяца 
- Гранулярность расчёта – отдельный borough, преступления за месяц
- Разбивка на различного вида преступления *(сколько?)* категорий
- Исторические данные загружаются *(как часто?)*
- Создание дашборда визуализации предсказаний модели *(требования?)*

##### Бизнес-требования и ограничения для пилота
- Необходимо cделать предсказания уровня безопасности на 6 следующих месяцев до конца декабря.
- Гранулярность расчёта – отдельный borough, преступления за месяц
- Предсказываются различного вида преступления *(сколько?)* категорий

##### Проведение пилота
- Тестирование модели и оценка пилота будут проводится на открытых данных Лондонской Полиции и агрегированых *(???)* данных социальных эвентов Лондона. 

#### 1.3. Что входит в скоуп итерации, а что нет
*(DS)*

#### 1.4. Предпосылки решения
*(DS)*
- Проект ведётся в GitLab
- Документация – google docs на google disc *(??? DS)*. Должна содержать описание алгоритма, результаты промежуточных тестов *(??? DS)*
- Код. В JupyterLab, соответствует PEP8, разбит на модули (??? DS) 
- Стек: *(?где?? DS)*
- БД: *(?что?? DS)*

### 2. Методология
[Здесь должно быть описание методологии, используемой для разработки ML модели. Можно упомянуть методы предобработки данных, выбора модели, обучения и оценки. - *(DS)*]

#### 2.1. Постановка задачи
- Создание прогнозной модели, задача регрессии. 
#### 2.2. Блок схема
#### 2.3. Ключевые эпохи разработки решения задачи
##### 2.3.1 Milestone 1 Первичное знакомство, пробный dummy сервиса 

**Цель эпохи.** Первичное знакомство с задачей, ее постановкой, возможными проблемами в:
- структуре данных, 
- обновляемости данных,
- постановке бизнес задачи, 
- достижимости/проверяемости бизнес метрик,
- реализуемости модели,
- реализуемости сервиса

##### 2.3.2 Milestone 2 Исследование 

**Цель эпохи.** Исследование бизнес задачи: 
- какие дополнительные данные могут улучшить прогноз,
- выбор основного набора данных,
- гранулярности данных (временного шага),
- выбор методики представления бизнес метрик,
- выбор оптимального набора моделей,
- вопросы с сервисной реализацией(???) и представлением данных(???). 

Вопросы на которые надо будет ответить:
- Какие причинно-следственные закономерности могут быть интересны для бизнес задачи, что из этого достижимо согласно получаемым данным, проверяемо в рамках планируемого сервиса?
- Методика сравнения моделей и выбора лучшей/конечной модели (исходя из данных и сервиса)?
- Выбор конечного набора признаков и описание способов их получения из данных?
- Как переводим "оценку" преступности в безопасность для "туриста"/жителя? 
- Сформулировать условия = метрики по которым будт отслеживаться изменения в данных для основных датасетов. 

##### 2.3.3 Milestone 3 Реализация

**Цель эпохи.** Реализация:
- пайплайнов данных и моделей согласно M2,
- сервисной части проекта,
- мониторинга работы модели.  


#### 2.4. Этапы разработки решения задачи 

##### 2.4.1 Этап 1 Подготовка данных
- Перенос числа преступлений в районах города в уровень безопасности.

У нас на данный момент список датасетов, в которых данные по дням:
 - MPS_дата1   
 - MPS_дата2
 - MPS_дата3  
  
Необходимо слить их в последние 3 года.
Агрегировать данные с шагом 1 неделя.

Риски: Если меняется бизнес задача и данные нужны на более длинный период (6 месяцев 6 лет),
надо заново проводить этот этап.
 

##### 2.4.2 Этап 2   Отбор существенных для бизнес-процесса значений признака "противоправное деяние".
[привести полный список деяний]

Риски: Если меняется бизнес задача, может меняться набор "ключевых" деяний 

MVP: тетрадь юпитера с загруженными признаками.
Шаг 2. Обработка данных, подготовка к обучению. 2.3.3 Этап Фаза исследования 
выбор регулярных событий социальных событий, которые могу влиять на уровень безопасности:
- футбольные матчи на крупных стадионах - Концерты собирающие более 10'000 человек
- как оценивать влияние редких событий: мероприятия посвященные Королевской семье, ? 



Новые данные/модель

При поступлении новых данных (от MPS) необходимо обновить данные и модели   





#### 3. Затраты на внедрение проекта
Затраты на внедрение проекта включают затраты на разработку модели и внедрение модели в эксплуатацию.

#### *(??? какой пункт?)* Дизайн ML системы
ML модель будет построена на основе регрессионной *(??? DS)* модели. В качестве входных данных для модели будут использоваться данные из следующих источников:
- Данные о преступности
- Данные о социальных эвентах района 
- Погодные данные *(???)*

#### Выводы
Разработка ML модели для прогнозирования уровня безопасности в районах Лондона является перспективным направлением. Внедрение такой модели позволит более точно прогнозировать уровень безопасности, что будет способствовать повышению эффективности управления безопасностью и повышению уровня безопасности в целом.

#### Дополнительные рекомендации
В документ можно включить следующие дополнительные сведения:
- Подробное описание регрессионной модели, которая будет использоваться для прогнозирования уровня безопасности.
- План сбора данных для ML модели.
- План внедрения ML модели в эксплуатацию.
- Оценка экономической эффективности ML модели.
